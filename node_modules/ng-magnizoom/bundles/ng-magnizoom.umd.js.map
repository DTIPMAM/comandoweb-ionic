{"version":3,"file":"ng-magnizoom.umd.js","sources":["../../../projects/ng-magnizoom/src/lib/magnizoom.service.ts","../../../projects/ng-magnizoom/src/lib/magnizoom.component.ts","../../../projects/ng-magnizoom/src/lib/magnizoom.module.ts","../../../projects/ng-magnizoom/src/public-api.ts","../../../projects/ng-magnizoom/src/ng-magnizoom.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MagnizoomService {\n\n  constructor() { }\n}\n","import type { ElementRef } from '@angular/core';\nimport { Component, OnInit, OnChanges, SimpleChanges, Input, Output, ViewChild, EventEmitter } from '@angular/core';\n\ninterface Size2D { width: number; height: number; }\ntype Point2D = { x: number, y: number } | null;\n\n@Component({\n  selector: 'ng-magnizoom',\n  templateUrl: './magnizoom.component.html',\n  styleUrls: ['./magnizoom.component.scss']\n})\nexport class NgMagnizoomComponent implements OnInit, OnChanges {\n\n  @Input() imageSrc: string;\n  @Input() zoomMode: 'LENS' | 'COVER' = 'COVER';\n  @Input() minZoomFactor = 1.2;\n  @Input() maxZoomFactor = 3;\n\n  @Input() zoomFactor = 2;\n  @Output() zoomFactorChange = new EventEmitter<number>();\n\n  @Input() lensSizeUnit: 'NORMALIZED' | 'PIXEL' = 'NORMALIZED';\n  @Input() lensSize: Size2D = { width: 0.5, height: 0.5 };\n\n  @Input() zoomCenterUnit: 'NORMALIZED' | 'PIXEL' = 'NORMALIZED';\n  @Input() zoomCenter?: Point2D;\n  @Output() zoomCenterChange = new EventEmitter<Point2D | undefined>();\n\n\n  @Input() updateOnMouseEvents = true;\n\n\n  @Input() imageStyle: { [x: string]: any; };\n  @Input() imageClass: any;\n\n  @ViewChild('mainCanvas', { static: true }) mainCanvasRef: ElementRef;\n\n  canvas: HTMLCanvasElement;\n  context: CanvasRenderingContext2D;\n  image: HTMLImageElement;\n\n  _centerPosition: Point2D;\n  _lensSize?: Size2D;\n  _zoomFactor: number;\n\n  imageReady = false;\n  get canvasWidth() { return this.image && this.image.width || 800; }\n  get canvasHeight() { return this.image && this.image.height || 600; }\n\n  constructor() { }\n\n  ngOnInit() {\n    this.initContext();\n    this.loadImage(this.imageSrc);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (!changes) {\n      return;\n    }\n    if (changes.lensSize || changes.zoomCenter || changes.zoomFactor) {\n      this.updateParameters();\n    }\n    if (changes.imageSrc && !changes.imageSrc.firstChange) {\n      this.loadImage(changes.imageSrc.currentValue);\n    }\n  }\n\n  initContext() {\n    this.canvas = (this.mainCanvasRef.nativeElement as HTMLCanvasElement);\n    this.context = this.canvas.getContext('2d');\n  }\n\n  loadImage(src: string) {\n    this.image = new Image();\n    this.image.onload = () => {\n      this.imageReady = true;\n      this.updateParameters();\n      setTimeout(() => this.update());\n    };\n    this.image.src = src;\n  }\n\n  updateParameters() {\n    if (this.lensSizeUnit === 'NORMALIZED') {\n      if (this.imageReady) {\n        this._lensSize = {\n          width: this.lensSize.width * this.image.width,\n          height: this.lensSize.height * this.image.height\n        };\n      }\n    } else {\n      this._lensSize = {\n        width: this.lensSize.width,\n        height: this.lensSize.height\n      };\n    }\n\n    if (!this.zoomCenter) {\n      this._centerPosition = undefined;\n    } else if (this.zoomCenterUnit === 'NORMALIZED'){\n      if (this.imageReady) {\n        this._centerPosition = {\n          x: this.zoomCenter.x * this.image.width,\n          y: this.zoomCenter.y * this.image.height\n        };\n      }\n    } else {\n      this._centerPosition = {\n        x: this.zoomCenter.x,\n        y: this.zoomCenter.y\n      };\n    }\n\n    this._zoomFactor = this.zoomFactor;\n    if (this._zoomFactor > this.maxZoomFactor) {\n      this._zoomFactor = this.maxZoomFactor;\n    }\n    if (this._zoomFactor < this.minZoomFactor) {\n      this._zoomFactor = this.minZoomFactor;\n    }\n\n    this.update();\n  }\n\n  update() {\n    this.render();\n    let currUnitCenter: { x: number, y: number } | undefined, needUpdate = false;\n    if (!this._centerPosition) {\n      currUnitCenter = undefined;\n      needUpdate = currUnitCenter !== this.zoomCenter;\n    } else if (this.zoomCenterUnit === 'NORMALIZED') {\n      if (this.imageReady) {\n        currUnitCenter = {\n          x: this._centerPosition.x / this.image.width,\n          y: this._centerPosition.y / this.image.height\n        };\n        needUpdate = currUnitCenter.x !== this.zoomCenter?.x || currUnitCenter.y !== this.zoomCenter?.y;\n      }\n    } else {\n      currUnitCenter = {\n        x: this._centerPosition.x,\n        y: this._centerPosition.y\n      };\n      needUpdate = currUnitCenter.x !== this.zoomCenter?.x || currUnitCenter.y !== this.zoomCenter?.y;\n    }\n    if (needUpdate) {\n      this.zoomCenterChange.emit(currUnitCenter);\n    }\n  }\n\n  render() {\n    if (!this.context || !this.imageReady) {\n      return;\n    }\n\n    this.context.clearRect(0, 0, this.canvasWidth, this.canvasHeight); // clear canvas\n    this.context.lineWidth = 1; // border width\n    this.context.drawImage(this.image, 0, 0); // bg image\n\n    if (this._centerPosition) {\n      switch (this.zoomMode) {\n        case 'LENS': this.renderLensMode(); break;\n        case 'COVER': this.renderCoverMode(); break;\n      }\n    }\n  }\n\n  renderLensMode() {\n    this.context.lineWidth = 5; // border width\n    const zoomRect = this.getZoomRect();\n    this.context.fillRect(zoomRect.x, zoomRect.y, zoomRect.w, zoomRect.h); // bg (clear)\n    const clippingRect = this.getClippingRect();\n    // zoom image\n    this.context.drawImage(\n      this.image,\n      clippingRect.x, clippingRect.y, clippingRect.w, clippingRect.h,\n      zoomRect.x, zoomRect.y, zoomRect.w, zoomRect.h\n    );\n    this.context.strokeRect(zoomRect.x, zoomRect.y, zoomRect.w, zoomRect.h); // border\n  }\n\n  renderCoverMode() {\n    const covertRect = this.getCoverRect();\n    this.context.drawImage(\n      this.image,\n      covertRect.x, covertRect.y, covertRect.w, covertRect.h,\n      0, 0, this.canvasWidth, this.canvasHeight\n    ); // cover image\n  }\n\n  getZoomRect() {\n    const w = this._lensSize.width;\n    const h = this._lensSize.height;\n    const x = this._centerPosition.x - (w / 2);\n    const y = this._centerPosition.y - (h / 2);\n    return this.clampRect(x, y, w, h);\n  }\n\n  getClippingRect() {\n    const w = this._lensSize.width / this._zoomFactor;\n    const h = this._lensSize.height / this._zoomFactor;\n    const x = this._centerPosition.x - (w / 2);\n    const y = this._centerPosition.y - (h / 2);\n    return this.clampRect(x, y, w, h);\n  }\n\n  getCoverRect() {\n    const w = this.canvasWidth / this._zoomFactor;\n    const h = this.canvasHeight / this._zoomFactor;\n    // const x = this.mousePosition.x - (w / 2);\n    // const y = this.mousePosition.y - (h / 2);\n    const x = this._centerPosition.x - this._centerPosition.x / this._zoomFactor;\n    const y = this._centerPosition.y - this._centerPosition.y / this._zoomFactor;\n    return this.clampRect(x, y, w, h);\n  }\n\n  clampRect(x: number, y: number, w: number, h: number) {\n    if (x <= 0) { x = 0; }\n    if (x + w >= this.canvasWidth) { x = this.canvasWidth - w; }\n    if (y < 0) { y = 0; }\n    if (y + h >= this.canvasHeight) { y = this.canvasHeight - h; }\n    return { x, y, w, h };\n  }\n\n  calculateMousePosition(clientX: number, clientY: number) {\n    const boundingRect = this.canvas.getBoundingClientRect();\n    const viewToModelX = this.canvasWidth / boundingRect.width;\n    const viewToModelY = this.canvasHeight / boundingRect.height;\n    const x = (clientX - boundingRect.left) * viewToModelX;\n    const y = (clientY - boundingRect.top) * viewToModelY;\n    this._centerPosition = { x, y };\n  }\n\n  onMouseLeave(event: MouseEvent) {\n    if (!this.updateOnMouseEvents) { return; }\n    this._centerPosition = null;\n    this.update();\n  }\n\n  onMouseEnterOrMove(event: MouseEvent) {\n    if (!this.updateOnMouseEvents) { return; }\n    this.calculateMousePosition(event.clientX, event.clientY);\n    this.update();\n  }\n\n  onMouseScroll(event: WheelEvent) {\n    if (!this.updateOnMouseEvents) { return; }\n    let newZoomFactor = this._zoomFactor;\n    newZoomFactor -= event.deltaY / 1000;\n    if (newZoomFactor < this.minZoomFactor) { newZoomFactor = this.minZoomFactor; }\n    if (newZoomFactor > this.maxZoomFactor) { newZoomFactor = this.maxZoomFactor; }\n    if (this._zoomFactor !== newZoomFactor) {\n      this._zoomFactor = newZoomFactor;\n      if (this.zoomFactor !== this._zoomFactor) {\n        this.zoomFactorChange.emit(this._zoomFactor);\n      }\n      this.update();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgMagnizoomComponent } from './magnizoom.component';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [NgMagnizoomComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [NgMagnizoomComponent]\n})\nexport class NgMagnizoomModule { }\n","/*\n * Public API Surface of ng-magnizoom\n */\n\nexport * from './lib/magnizoom.service';\nexport * from './lib/magnizoom.component';\nexport * from './lib/magnizoom.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Injectable","EventEmitter","Component","Input","Output","ViewChild","NgModule","CommonModule"],"mappings":";;;;;;;QAOE;SAAiB;;;;;gBALlBA,aAAU,SAAC;oBACV,UAAU,EAAE,MAAM;iBACnB;;;;;;QC6CC;YAnCS,aAAQ,GAAqB,OAAO,CAAC;YACrC,kBAAa,GAAG,GAAG,CAAC;YACpB,kBAAa,GAAG,CAAC,CAAC;YAElB,eAAU,GAAG,CAAC,CAAC;YACd,qBAAgB,GAAG,IAAIC,eAAY,EAAU,CAAC;YAE/C,iBAAY,GAA2B,YAAY,CAAC;YACpD,aAAQ,GAAW,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;YAE/C,mBAAc,GAA2B,YAAY,CAAC;YAErD,qBAAgB,GAAG,IAAIA,eAAY,EAAuB,CAAC;YAG5D,wBAAmB,GAAG,IAAI,CAAC;YAgBpC,eAAU,GAAG,KAAK,CAAC;SAIF;QAHjB,sBAAI,6CAAW;iBAAf,cAAoB,OAAO,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,GAAG,CAAC,EAAE;;;WAAA;QACnE,sBAAI,8CAAY;iBAAhB,cAAqB,OAAO,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,GAAG,CAAC,EAAE;;;WAAA;QAIrE,uCAAQ,GAAR;YACE,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC/B;QAED,0CAAW,GAAX,UAAY,OAAsB;YAChC,IAAI,CAAC,OAAO,EAAE;gBACZ,OAAO;aACR;YACD,IAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,EAAE;gBAChE,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACzB;YACD,IAAI,OAAO,CAAC,QAAQ,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE;gBACrD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;aAC/C;SACF;QAED,0CAAW,GAAX;YACE,IAAI,CAAC,MAAM,GAAI,IAAI,CAAC,aAAa,CAAC,aAAmC,CAAC;YACtE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;SAC7C;QAED,wCAAS,GAAT,UAAU,GAAW;YAArB,iBAQC;YAPC,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;YACzB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG;gBAClB,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,KAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,MAAM,EAAE,GAAA,CAAC,CAAC;aACjC,CAAC;YACF,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC;SACtB;QAED,+CAAgB,GAAhB;YACE,IAAI,IAAI,CAAC,YAAY,KAAK,YAAY,EAAE;gBACtC,IAAI,IAAI,CAAC,UAAU,EAAE;oBACnB,IAAI,CAAC,SAAS,GAAG;wBACf,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK;wBAC7C,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM;qBACjD,CAAC;iBACH;aACF;iBAAM;gBACL,IAAI,CAAC,SAAS,GAAG;oBACf,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK;oBAC1B,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM;iBAC7B,CAAC;aACH;YAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;aAClC;iBAAM,IAAI,IAAI,CAAC,cAAc,KAAK,YAAY,EAAC;gBAC9C,IAAI,IAAI,CAAC,UAAU,EAAE;oBACnB,IAAI,CAAC,eAAe,GAAG;wBACrB,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK;wBACvC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM;qBACzC,CAAC;iBACH;aACF;iBAAM;gBACL,IAAI,CAAC,eAAe,GAAG;oBACrB,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;oBACpB,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;iBACrB,CAAC;aACH;YAED,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,EAAE;gBACzC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;aACvC;YACD,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,EAAE;gBACzC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;aACvC;YAED,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAED,qCAAM,GAAN;;YACE,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,cAAoD,EAAE,UAAU,GAAG,KAAK,CAAC;YAC7E,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;gBACzB,cAAc,GAAG,SAAS,CAAC;gBAC3B,UAAU,GAAG,cAAc,KAAK,IAAI,CAAC,UAAU,CAAC;aACjD;iBAAM,IAAI,IAAI,CAAC,cAAc,KAAK,YAAY,EAAE;gBAC/C,IAAI,IAAI,CAAC,UAAU,EAAE;oBACnB,cAAc,GAAG;wBACf,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK;wBAC5C,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM;qBAC9C,CAAC;oBACF,UAAU,GAAG,cAAc,CAAC,CAAC,YAAK,IAAI,CAAC,UAAU,0CAAE,CAAC,CAAA,IAAI,cAAc,CAAC,CAAC,YAAK,IAAI,CAAC,UAAU,0CAAE,CAAC,CAAA,CAAC;iBACjG;aACF;iBAAM;gBACL,cAAc,GAAG;oBACf,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;oBACzB,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;iBAC1B,CAAC;gBACF,UAAU,GAAG,cAAc,CAAC,CAAC,YAAK,IAAI,CAAC,UAAU,0CAAE,CAAC,CAAA,IAAI,cAAc,CAAC,CAAC,YAAK,IAAI,CAAC,UAAU,0CAAE,CAAC,CAAA,CAAC;aACjG;YACD,IAAI,UAAU,EAAE;gBACd,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;aAC5C;SACF;QAED,qCAAM,GAAN;YACE,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACrC,OAAO;aACR;YAED,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAClE,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,CAAC;YAC3B,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEzC,IAAI,IAAI,CAAC,eAAe,EAAE;gBACxB,QAAQ,IAAI,CAAC,QAAQ;oBACnB,KAAK,MAAM;wBAAE,IAAI,CAAC,cAAc,EAAE,CAAC;wBAAC,MAAM;oBAC1C,KAAK,OAAO;wBAAE,IAAI,CAAC,eAAe,EAAE,CAAC;wBAAC,MAAM;iBAC7C;aACF;SACF;QAED,6CAAc,GAAd;YACE,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,CAAC;YAC3B,IAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACpC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;YACtE,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;;YAE5C,IAAI,CAAC,OAAO,CAAC,SAAS,CACpB,IAAI,CAAC,KAAK,EACV,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAC9D,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAC/C,CAAC;YACF,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;SACzE;QAED,8CAAe,GAAf;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YACvC,IAAI,CAAC,OAAO,CAAC,SAAS,CACpB,IAAI,CAAC,KAAK,EACV,UAAU,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAC1C,CAAC;SACH;QAED,0CAAW,GAAX;YACE,IAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;YAC/B,IAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,IAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3C,IAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3C,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SACnC;QAED,8CAAe,GAAf;YACE,IAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;YAClD,IAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;YACnD,IAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3C,IAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3C,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SACnC;QAED,2CAAY,GAAZ;YACE,IAAM,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;YAC9C,IAAM,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;;;YAG/C,IAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;YAC7E,IAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;YAC7E,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SACnC;QAED,wCAAS,GAAT,UAAU,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,CAAS;YAClD,IAAI,CAAC,IAAI,CAAC,EAAE;gBAAE,CAAC,GAAG,CAAC,CAAC;aAAE;YACtB,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,WAAW,EAAE;gBAAE,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;aAAE;YAC5D,IAAI,CAAC,GAAG,CAAC,EAAE;gBAAE,CAAC,GAAG,CAAC,CAAC;aAAE;YACrB,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,YAAY,EAAE;gBAAE,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;aAAE;YAC9D,OAAO,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC;SACvB;QAED,qDAAsB,GAAtB,UAAuB,OAAe,EAAE,OAAe;YACrD,IAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;YACzD,IAAM,YAAY,GAAG,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,KAAK,CAAC;YAC3D,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC,MAAM,CAAC;YAC7D,IAAM,CAAC,GAAG,CAAC,OAAO,GAAG,YAAY,CAAC,IAAI,IAAI,YAAY,CAAC;YACvD,IAAM,CAAC,GAAG,CAAC,OAAO,GAAG,YAAY,CAAC,GAAG,IAAI,YAAY,CAAC;YACtD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC;SACjC;QAED,2CAAY,GAAZ,UAAa,KAAiB;YAC5B,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;gBAAE,OAAO;aAAE;YAC1C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAED,iDAAkB,GAAlB,UAAmB,KAAiB;YAClC,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;gBAAE,OAAO;aAAE;YAC1C,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;YAC1D,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAED,4CAAa,GAAb,UAAc,KAAiB;YAC7B,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;gBAAE,OAAO;aAAE;YAC1C,IAAI,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC;YACrC,aAAa,IAAI,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;YACrC,IAAI,aAAa,GAAG,IAAI,CAAC,aAAa,EAAE;gBAAE,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;aAAE;YAC/E,IAAI,aAAa,GAAG,IAAI,CAAC,aAAa,EAAE;gBAAE,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;aAAE;YAC/E,IAAI,IAAI,CAAC,WAAW,KAAK,aAAa,EAAE;gBACtC,IAAI,CAAC,WAAW,GAAG,aAAa,CAAC;gBACjC,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,WAAW,EAAE;oBACxC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;iBAC9C;gBACD,IAAI,CAAC,MAAM,EAAE,CAAC;aACf;YACD,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;SACzB;;;;gBA/PFC,YAAS,SAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,iWAAyC;;iBAE1C;;;;;2BAGEC,QAAK;2BACLA,QAAK;gCACLA,QAAK;gCACLA,QAAK;6BAELA,QAAK;mCACLC,SAAM;+BAEND,QAAK;2BACLA,QAAK;iCAELA,QAAK;6BACLA,QAAK;mCACLC,SAAM;sCAGND,QAAK;6BAGLA,QAAK;6BACLA,QAAK;gCAELE,YAAS,SAAC,YAAY,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;;;;QCtB3C;;;;;gBAPCC,WAAQ,SAAC;oBACR,YAAY,EAAE,CAAC,oBAAoB,CAAC;oBACpC,OAAO,EAAE;wBACPC,mBAAY;qBACb;oBACD,OAAO,EAAE,CAAC,oBAAoB,CAAC;iBAChC;;;ICZD;;;;ICAA;;;;;;;;;;;;;;"}