{"version":3,"file":"ng-magnizoom.js","sources":["../../../projects/ng-magnizoom/src/lib/magnizoom.service.ts","../../../projects/ng-magnizoom/src/lib/magnizoom.component.ts","../../../projects/ng-magnizoom/src/lib/magnizoom.module.ts","../../../projects/ng-magnizoom/src/public-api.ts","../../../projects/ng-magnizoom/src/ng-magnizoom.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MagnizoomService {\n\n  constructor() { }\n}\n","import type { ElementRef } from '@angular/core';\nimport { Component, OnInit, OnChanges, SimpleChanges, Input, Output, ViewChild, EventEmitter } from '@angular/core';\n\ninterface Size2D { width: number; height: number; }\ntype Point2D = { x: number, y: number } | null;\n\n@Component({\n  selector: 'ng-magnizoom',\n  templateUrl: './magnizoom.component.html',\n  styleUrls: ['./magnizoom.component.scss']\n})\nexport class NgMagnizoomComponent implements OnInit, OnChanges {\n\n  @Input() imageSrc: string;\n  @Input() zoomMode: 'LENS' | 'COVER' = 'COVER';\n  @Input() minZoomFactor = 1.2;\n  @Input() maxZoomFactor = 3;\n\n  @Input() zoomFactor = 2;\n  @Output() zoomFactorChange = new EventEmitter<number>();\n\n  @Input() lensSizeUnit: 'NORMALIZED' | 'PIXEL' = 'NORMALIZED';\n  @Input() lensSize: Size2D = { width: 0.5, height: 0.5 };\n\n  @Input() zoomCenterUnit: 'NORMALIZED' | 'PIXEL' = 'NORMALIZED';\n  @Input() zoomCenter?: Point2D;\n  @Output() zoomCenterChange = new EventEmitter<Point2D | undefined>();\n\n\n  @Input() updateOnMouseEvents = true;\n\n\n  @Input() imageStyle: { [x: string]: any; };\n  @Input() imageClass: any;\n\n  @ViewChild('mainCanvas', { static: true }) mainCanvasRef: ElementRef;\n\n  canvas: HTMLCanvasElement;\n  context: CanvasRenderingContext2D;\n  image: HTMLImageElement;\n\n  _centerPosition: Point2D;\n  _lensSize?: Size2D;\n  _zoomFactor: number;\n\n  imageReady = false;\n  get canvasWidth() { return this.image && this.image.width || 800; }\n  get canvasHeight() { return this.image && this.image.height || 600; }\n\n  constructor() { }\n\n  ngOnInit() {\n    this.initContext();\n    this.loadImage(this.imageSrc);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (!changes) {\n      return;\n    }\n    if (changes.lensSize || changes.zoomCenter || changes.zoomFactor) {\n      this.updateParameters();\n    }\n    if (changes.imageSrc && !changes.imageSrc.firstChange) {\n      this.loadImage(changes.imageSrc.currentValue);\n    }\n  }\n\n  initContext() {\n    this.canvas = (this.mainCanvasRef.nativeElement as HTMLCanvasElement);\n    this.context = this.canvas.getContext('2d');\n  }\n\n  loadImage(src: string) {\n    this.image = new Image();\n    this.image.onload = () => {\n      this.imageReady = true;\n      this.updateParameters();\n      setTimeout(() => this.update());\n    };\n    this.image.src = src;\n  }\n\n  updateParameters() {\n    if (this.lensSizeUnit === 'NORMALIZED') {\n      if (this.imageReady) {\n        this._lensSize = {\n          width: this.lensSize.width * this.image.width,\n          height: this.lensSize.height * this.image.height\n        };\n      }\n    } else {\n      this._lensSize = {\n        width: this.lensSize.width,\n        height: this.lensSize.height\n      };\n    }\n\n    if (!this.zoomCenter) {\n      this._centerPosition = undefined;\n    } else if (this.zoomCenterUnit === 'NORMALIZED'){\n      if (this.imageReady) {\n        this._centerPosition = {\n          x: this.zoomCenter.x * this.image.width,\n          y: this.zoomCenter.y * this.image.height\n        };\n      }\n    } else {\n      this._centerPosition = {\n        x: this.zoomCenter.x,\n        y: this.zoomCenter.y\n      };\n    }\n\n    this._zoomFactor = this.zoomFactor;\n    if (this._zoomFactor > this.maxZoomFactor) {\n      this._zoomFactor = this.maxZoomFactor;\n    }\n    if (this._zoomFactor < this.minZoomFactor) {\n      this._zoomFactor = this.minZoomFactor;\n    }\n\n    this.update();\n  }\n\n  update() {\n    this.render();\n    let currUnitCenter: { x: number, y: number } | undefined, needUpdate = false;\n    if (!this._centerPosition) {\n      currUnitCenter = undefined;\n      needUpdate = currUnitCenter !== this.zoomCenter;\n    } else if (this.zoomCenterUnit === 'NORMALIZED') {\n      if (this.imageReady) {\n        currUnitCenter = {\n          x: this._centerPosition.x / this.image.width,\n          y: this._centerPosition.y / this.image.height\n        };\n        needUpdate = currUnitCenter.x !== this.zoomCenter?.x || currUnitCenter.y !== this.zoomCenter?.y;\n      }\n    } else {\n      currUnitCenter = {\n        x: this._centerPosition.x,\n        y: this._centerPosition.y\n      };\n      needUpdate = currUnitCenter.x !== this.zoomCenter?.x || currUnitCenter.y !== this.zoomCenter?.y;\n    }\n    if (needUpdate) {\n      this.zoomCenterChange.emit(currUnitCenter);\n    }\n  }\n\n  render() {\n    if (!this.context || !this.imageReady) {\n      return;\n    }\n\n    this.context.clearRect(0, 0, this.canvasWidth, this.canvasHeight); // clear canvas\n    this.context.lineWidth = 1; // border width\n    this.context.drawImage(this.image, 0, 0); // bg image\n\n    if (this._centerPosition) {\n      switch (this.zoomMode) {\n        case 'LENS': this.renderLensMode(); break;\n        case 'COVER': this.renderCoverMode(); break;\n      }\n    }\n  }\n\n  renderLensMode() {\n    this.context.lineWidth = 5; // border width\n    const zoomRect = this.getZoomRect();\n    this.context.fillRect(zoomRect.x, zoomRect.y, zoomRect.w, zoomRect.h); // bg (clear)\n    const clippingRect = this.getClippingRect();\n    // zoom image\n    this.context.drawImage(\n      this.image,\n      clippingRect.x, clippingRect.y, clippingRect.w, clippingRect.h,\n      zoomRect.x, zoomRect.y, zoomRect.w, zoomRect.h\n    );\n    this.context.strokeRect(zoomRect.x, zoomRect.y, zoomRect.w, zoomRect.h); // border\n  }\n\n  renderCoverMode() {\n    const covertRect = this.getCoverRect();\n    this.context.drawImage(\n      this.image,\n      covertRect.x, covertRect.y, covertRect.w, covertRect.h,\n      0, 0, this.canvasWidth, this.canvasHeight\n    ); // cover image\n  }\n\n  getZoomRect() {\n    const w = this._lensSize.width;\n    const h = this._lensSize.height;\n    const x = this._centerPosition.x - (w / 2);\n    const y = this._centerPosition.y - (h / 2);\n    return this.clampRect(x, y, w, h);\n  }\n\n  getClippingRect() {\n    const w = this._lensSize.width / this._zoomFactor;\n    const h = this._lensSize.height / this._zoomFactor;\n    const x = this._centerPosition.x - (w / 2);\n    const y = this._centerPosition.y - (h / 2);\n    return this.clampRect(x, y, w, h);\n  }\n\n  getCoverRect() {\n    const w = this.canvasWidth / this._zoomFactor;\n    const h = this.canvasHeight / this._zoomFactor;\n    // const x = this.mousePosition.x - (w / 2);\n    // const y = this.mousePosition.y - (h / 2);\n    const x = this._centerPosition.x - this._centerPosition.x / this._zoomFactor;\n    const y = this._centerPosition.y - this._centerPosition.y / this._zoomFactor;\n    return this.clampRect(x, y, w, h);\n  }\n\n  clampRect(x: number, y: number, w: number, h: number) {\n    if (x <= 0) { x = 0; }\n    if (x + w >= this.canvasWidth) { x = this.canvasWidth - w; }\n    if (y < 0) { y = 0; }\n    if (y + h >= this.canvasHeight) { y = this.canvasHeight - h; }\n    return { x, y, w, h };\n  }\n\n  calculateMousePosition(clientX: number, clientY: number) {\n    const boundingRect = this.canvas.getBoundingClientRect();\n    const viewToModelX = this.canvasWidth / boundingRect.width;\n    const viewToModelY = this.canvasHeight / boundingRect.height;\n    const x = (clientX - boundingRect.left) * viewToModelX;\n    const y = (clientY - boundingRect.top) * viewToModelY;\n    this._centerPosition = { x, y };\n  }\n\n  onMouseLeave(event: MouseEvent) {\n    if (!this.updateOnMouseEvents) { return; }\n    this._centerPosition = null;\n    this.update();\n  }\n\n  onMouseEnterOrMove(event: MouseEvent) {\n    if (!this.updateOnMouseEvents) { return; }\n    this.calculateMousePosition(event.clientX, event.clientY);\n    this.update();\n  }\n\n  onMouseScroll(event: WheelEvent) {\n    if (!this.updateOnMouseEvents) { return; }\n    let newZoomFactor = this._zoomFactor;\n    newZoomFactor -= event.deltaY / 1000;\n    if (newZoomFactor < this.minZoomFactor) { newZoomFactor = this.minZoomFactor; }\n    if (newZoomFactor > this.maxZoomFactor) { newZoomFactor = this.maxZoomFactor; }\n    if (this._zoomFactor !== newZoomFactor) {\n      this._zoomFactor = newZoomFactor;\n      if (this.zoomFactor !== this._zoomFactor) {\n        this.zoomFactorChange.emit(this._zoomFactor);\n      }\n      this.update();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgMagnizoomComponent } from './magnizoom.component';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [NgMagnizoomComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [NgMagnizoomComponent]\n})\nexport class NgMagnizoomModule { }\n","/*\n * Public API Surface of ng-magnizoom\n */\n\nexport * from './lib/magnizoom.service';\nexport * from './lib/magnizoom.component';\nexport * from './lib/magnizoom.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}